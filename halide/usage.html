
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Usage Instructions Â· The Ultimate Documentation for CGRAFlow</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="halide-basics.html" />
    
    
    <link rel="prev" href="installation.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../overview/toolchain.html">
            
                <a href="../overview/toolchain.html">
            
                    
                    Tool Chain Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../cgra/cgra-generator.html">
            
                <a href="../cgra/cgra-generator.html">
            
                    
                    CGRA Generator
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../cgra/pe-spec.html">
            
                <a href="../cgra/pe-spec.html">
            
                    
                    PE Spec
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="intro.html">
            
                <a href="intro.html">
            
                    
                    Halide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.2" data-path="usage.html">
            
                <a href="usage.html">
            
                    
                    Usage Instructions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="halide-basics.html">
            
                <a href="halide-basics.html">
            
                    
                    Halide Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="writing-apps.html">
            
                <a href="writing-apps.html">
            
                    
                    Writing Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="operations.html">
            
                <a href="operations.html">
            
                    
                    Supported Operations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="application-list.html">
            
                <a href="application-list.html">
            
                    
                    Application List
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="compilation.html">
            
                <a href="compilation.html">
            
                    
                    Compilation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="hardware-lowering.html">
            
                <a href="hardware-lowering.html">
            
                    
                    Hardware Lowering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="codegen.html">
            
                <a href="codegen.html">
            
                    
                    Code Generation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../coreir/intro.html">
            
                <a href="../coreir/intro.html">
            
                    
                    CoreIR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../pnr/intro.html">
            
                <a href="../pnr/intro.html">
            
                    
                    Place and Route
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../pnr/packing.html">
            
                <a href="../pnr/packing.html">
            
                    
                    Packing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../pnr/placement.html">
            
                <a href="../pnr/placement.html">
            
                    
                    Placement
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../pnr/global-placement.html">
            
                <a href="../pnr/global-placement.html">
            
                    
                    Global Placement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../pnr/detailed-placement.html">
            
                <a href="../pnr/detailed-placement.html">
            
                    
                    Detailed Placement
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../pnr/routing.html">
            
                <a href="../pnr/routing.html">
            
                    
                    Routing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../pnr/global-routing.html">
            
                <a href="../pnr/global-routing.html">
            
                    
                    Global Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="../pnr/detailed-routing.html">
            
                <a href="../pnr/detailed-routing.html">
            
                    
                    Detailed Routing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../pnr/bitstream-gen.html">
            
                <a href="../pnr/bitstream-gen.html">
            
                    
                    Bitstream Generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../pnr/testing.html">
            
                <a href="../pnr/testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../pnr/analysis.html">
            
                <a href="../pnr/analysis.html">
            
                    
                    Analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../pnr/retiming.html">
            
                <a href="../pnr/retiming.html">
            
                    
                    Retiming
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../bsbuilder/bsbuilder.html">
            
                <a href="../bsbuilder/bsbuilder.html">
            
                    
                    Assembler (BSBuilder)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../bsbuilder/bitstream-spec.html">
            
                <a href="../bsbuilder/bitstream-spec.html">
            
                    
                    Bitstream Specification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../simulator/simulator.html">
            
                <a href="../simulator/simulator.html">
            
                    
                    Simulator (run_tbg)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../tbg/intro.html">
            
                <a href="../tbg/intro.html">
            
                    
                    Test Bench Generator
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../tbg/harness_generation.html">
            
                <a href="../tbg/harness_generation.html">
            
                    
                    Harness Generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../tbg/io-json.html">
            
                <a href="../tbg/io-json.html">
            
                    
                    .io.json format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../tbg/pre_post_processing.html">
            
                <a href="../tbg/pre_post_processing.html">
            
                    
                    Pre/Post Processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../tbg/roadmap.html">
            
                <a href="../tbg/roadmap.html">
            
                    
                    Roadmap
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Usage Instructions</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="usage">Usage</h1>
<h2 id="installation">Installation</h2>
<p>See <a href="installation.html">Installation</a> section for how to install
dependencies and how to compile Halide.</p>
<h2 id="applications">Applications</h2>
<p>The applications can be found for the Halide_CoreIR repo in <code>apps/coreir_examples</code> and <code>apps/coreir_tests</code>.
The applications for the Halide-to-Hardware repo exist in <code>apps/hardware_examples/apps</code>
and <code>apps/hardware_examples/tests</code> where the distinction is that tests tend to focus
on a much narrower scope as compared to apps.</p>
<h2 id="make-targets">Make targets</h2>
<p>For the Halide_CoreIR repo, generation has three basic targets: <code>make clean</code>, 
<code>make design_top.json</code>, and <code>make out.png</code>. This will first remove old generated
files, then create the CoreIR file, and last test the CoreIR.</p>
<pre><code class="lang-make">make clean             # remove generated files
     design_top.json   # create CoreIR
     graph.png         # use graphviz to create visualization of circuit 
     out.png           # create output file
     test              # create CoreIR and check if circuit matches cached result
     update_golden     # update reference CoreIR json file
</code></pre>
<p>For the Halide-to-Hardware repo, some of the targets were updated. These
updates were meant to separate targets to a series of smaller steps. For
example, generating the reference CPU output no longer also tests CoreIR.
the basic steps remain: <code>make clean</code>, <code>make design_top.json</code>, and <code>make bin/output_coreir.png</code>.
In addition, these same targets are duplicated with new target names. The definition
of all of these targets can be found in <code>apps/hardware_benchmarks/hw_support/hardware_targets.mk</code>.</p>
<pre><code class="lang-make">make clean               # remove generated files (bin directory)
     compiler            # compile updates to Halide compiler
     generator           # create Halide generator
     bin/design_top.json # create CoreIR design
     design-coreir       # create CoreIR design
     design-cpu          # create CPU design
     bin/graph.png       # use graphviz to create visualization of circuit 
     bin/output_cpu.png  # create output file using CPU implementation
     run-cpu             # create output file using CPU implementation
     bin/output_cpu.png  # create output file using CoreIR implementation
     run-coreir          # create output file using CoreIR implementation
     compare-coreir-cpu  # compare CoreIR output file to CPU output image
     golden              # update reference CoreIR json file and output image
</code></pre>
<h2 id="application-folder">Application Folder</h2>
<p>The following is a list of the files that are important for generating
images and are used further in the flow. The CoreIR json files are created
for mapping to the CGRA. Also, an output image, out.png, is generated as a 
the reference image to determine if execution is correct. <code>out.png</code> is 
created using a CPU implementation of Halide, and its output should be
used for validation during CoreIR interpretation and CGRA simulation.</p>
<h3 id="directory-for-halidecoreir-repository">Directory for Halide_CoreIR repository</h3>
<pre><code>Halide_CoreIR
&#x2514;&#x2500;&#x2500; apps
    &#x251C;&#x2500;&#x2500; coreir_tests                       // contains simpler test cases
    &#x2514;&#x2500;&#x2500; coreir_examples                    // contains all apps compiled to coreir
        &#x2514;&#x2500;&#x2500; conv_bw                        // one of the apps: does 3x3 convolution
            &#x251C;&#x2500;&#x2500; Makefile                   // specifies commands for &apos;make&apos;
            &#x251C;&#x2500;&#x2500; pipeline.cpp               // contains Halide algorithm and schedule
            &#x251C;&#x2500;&#x2500; design_top_golden.json     // reference coreir output expected by compiler
            &#x251C;&#x2500;&#x2500; input.png                  // input image for testing
            &#x251C;&#x2500;&#x2500; run.cpp                    // runs input image with design to create ouput image
            &#x2502;
            &#x2502;                              //// Running &apos;make all&apos; generates:
            &#x251C;&#x2500;&#x2500; design_top.json            // generated CoreIR design
            &#x251C;&#x2500;&#x2500; design_top.txt             // generated graphiz representation of CoreIR
            &#x251C;&#x2500;&#x2500; graph.png                  // generated graphiz image of circuit (using &apos;make graph.png&apos;)
            &#x2514;&#x2500;&#x2500; out.png                    // output image created during testing
</code></pre><h3 id="directory-for-halide-to-hardware-repository">Directory for Halide-to-Hardware repository</h3>
<pre><code>Halide_CoreIR
&#x2514;&#x2500;&#x2500; apps
    &#x2514;&#x2500;&#x2500; hardware_benchmarks                    // contains simpler test cases
        &#x251C;&#x2500;&#x2500; apps                               // contains all apps compiled to coreir
        &#x2514;&#x2500;&#x2500; tests                              // contains all simpler test cases
            &#x2514;&#x2500;&#x2500; conv_3_3                       // one of the apps: does 3x3 convolution
                &#x251C;&#x2500;&#x2500; Makefile                   // specifies commands for &apos;make&apos;
                &#x251C;&#x2500;&#x2500; conv_3_3_generator.cpp     // contains Halide algorithm and schedule
                &#x251C;&#x2500;&#x2500; input.png                  // input image for testing
                &#x251C;&#x2500;&#x2500; process.cpp                // runs input image with design to create ouput image
                &#x251C;&#x2500;&#x2500; golden                     // this holds all expected output files
                &#x2502;   &#x2514;&#x2500;&#x2500; golden_output.png      // output image expected
                &#x2502;
                &#x2514;&#x2500;&#x2500; bin                        //// Running &apos;make all&apos; generates in this folder:
                    &#x251C;&#x2500;&#x2500; design_top.json        // generated CoreIR design
                    &#x251C;&#x2500;&#x2500; design_top.txt         // generated graphiz representation of CoreIR
                    &#x251C;&#x2500;&#x2500; graph.png              // generated graphiz image of circuit (using &apos;make graph.png&apos;)
                    &#x251C;&#x2500;&#x2500; output_cpu.png         // output image created using CPU implementation
                    &#x2514;&#x2500;&#x2500; output_coreir.png      // output image created during testing; should be equivalent to output_cpu.png
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="installation.html" class="navigation navigation-prev " aria-label="Previous page: Installation">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="halide-basics.html" class="navigation navigation-next " aria-label="Next page: Halide Basics">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Usage Instructions","level":"1.4.2","depth":2,"next":{"title":"Halide Basics","level":"1.4.3","depth":2,"path":"halide/halide-basics.md","ref":"halide/halide-basics.md","articles":[{"title":"Writing Applications","level":"1.4.3.1","depth":3,"path":"halide/writing-apps.md","ref":"halide/writing-apps.md","articles":[]},{"title":"Supported Operations","level":"1.4.3.2","depth":3,"path":"halide/operations.md","ref":"halide/operations.md","articles":[]},{"title":"Application List","level":"1.4.3.3","depth":3,"path":"halide/application-list.md","ref":"halide/application-list.md","articles":[]}]},"previous":{"title":"Installation","level":"1.4.1","depth":2,"path":"halide/installation.md","ref":"halide/installation.md","articles":[]},"dir":"ltr"},"config":{"plugins":["mathjax","expandable-chapters"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"mathjax":{"forceSVG":false,"version":"2.6-latest"},"expandable-chapters":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"The Ultimate Documentation for CGRAFlow","gitbook":"*"},"file":{"path":"halide/usage.md","mtime":"2019-08-03T22:25:34.498Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-08-03T22:30:06.539Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

